@import "tailwindcss";
@custom-variant dark (&:where(.dark, .dark *));

/* --- 1. è¨­è¨ˆæ¬Šæ– (Design Tokens) --- */
:root {
  /* åŸºç¤èƒŒæ™¯èˆ‡æ–‡å­— - æ·ºè‰²æ¨¡å¼ï¼šæ¸…æ–°ã€ä¹¾æ·¨ */
  --bg-body: #f1f5f9;         /* slate-100 */
  --bg-card: #ffffff;
  --text-main: #1e293b;       /* slate-800 */
  --border-default: #e2e8f0;

  /* ç»ç’ƒæ“¬æ…‹åŸºç¤è‰² */
  --glass-bg: rgba(255, 255, 255, 0.85);
  --glass-border: rgba(255, 255, 255, 0.5);
}

/* æ·±è‰²æ¨¡å¼è®Šæ•¸ - å¼·åŒ–å°æ¯”èˆ‡è‰²å½©é£½å’Œåº¦ */
.dark {
  --bg-body: #020617;         /* slate-950 (æ·±é‚ƒé»‘è—ï¼Œéæ­»ç°) */
  --bg-card: #0f172a;         /* slate-900 */
  --text-main: #f8fafc;       /* slate-50 */
  --border-default: #1e293b;  /* slate-800 */

  /* æ·±è‰²ç»ç’ƒæ“¬æ…‹ - å¢åŠ é€æ˜è³ªæ„Ÿ */
  --glass-bg: rgba(15, 23, 42, 0.8);
  --glass-border: rgba(255, 255, 255, 0.08);
}

/* --- 2. åŸºç¤ HTML æ¨£å¼ --- */
html, body {
  height: 100%;
}

body {
  background-color: var(--bg-body);
  color: var(--text-main);
  margin: 0;

  /* âŒ ä¸è¦ fixed */
  overflow: hidden;           /* ä»ç„¶é–æœ€å¤–å±¤æ²å‹• */
  overscroll-behavior-y: none;

  transition: background-color 0.4s cubic-bezier(0.4, 0, 0.2, 1),
              color 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

#root {
  width: 100vw;
  height: 100%;
  min-height: 100dvh;         /* âœ… çœŸæ­£çš„ä¸€å‹æ°¸é€¸ï¼šroot è‡ªå·±ç”¨ dvh */
  overflow: hidden;

  display: flex;
  flex-direction: column;
}

/* å¼·åˆ¶ç€è¦½å™¨æ¸²æŸ“æ·±è‰²æ¨¡å¼ç›¸é—œæ¨£å¼ */
html.dark {
  color-scheme: dark;
}

/* --- 3. å·¥å…·é¡ (Utility Classes) --- */
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
.no-scrollbar::-webkit-scrollbar { display: none; }

/* è‡ªè¨‚æ²è»¸æ¨£å¼ - æé«˜æ·±è‰²æ¨¡å¼è­˜åˆ¥åº¦ */
.custom-scrollbar::-webkit-scrollbar { width: 6px; }
.custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
.custom-scrollbar::-webkit-scrollbar-thumb { 
  background: #cbd5e1; 
  border-radius: 10px; 
  border: 2px solid transparent;
  background-clip: content-box;
}
.dark .custom-scrollbar::-webkit-scrollbar-thumb {
  background: #475569;
}

/* é€²éšç»ç’ƒæ“¬æ…‹ */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid var(--glass-border);
  box-shadow: 0 4px 15px -1px rgba(0, 0, 0, 0.1);
}
.dark .glass {
  box-shadow: 0 8px 30px -5px rgba(0, 0, 0, 0.5);
}

/* --- 4. å‹•ç•«å®šç¾© --- */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}
.animate-fade-in {
  animation: fadeIn 0.3s ease-out forwards;
}

/* éœ‡å‹•æ•ˆæœ (ç”¨æ–¼æ‰£åˆ†åé¥‹) */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-4px); }
  75% { transform: translateX(4px); }
}
.animate-shake {
  animation: shake 0.4s ease-in-out;
}

@font-face {
  font-family: 'ZhuyinAnnotated';
  /* å„ªå…ˆå°‹æ‰¾æœ¬æ©Ÿå®‰è£çš„åç¨± */
  src: local('ã„…æºæ³‰æ³¨éŸ³åœ“é«”'),
       /*local('BpmfGenSenRounded-L'),local('BpmfGenSenRounded'),local('BpmfGenSekiGothic-L'),local('ã„…æºçŸ³æ³¨éŸ³é»‘é«”'),local('ã„…æºæ³‰æ³¨éŸ³åœ“é«”'),*/
       local('BpmfGenSenRounded-R'),
       /* ç¶²è·¯å‚™ç”¨æª”æ¡ˆ */
       url('/fonts/BpmfGenSenRounded-R.ttf') format('truetype');
  font-display: swap;
}

.font-with-zhuyin {
  font-family: 'ZhuyinAnnotated', "Microsoft JhengHei", sans-serif;
  line-height: 1.5;
  /* ğŸ‘‡ æ–°å¢é€™å…©è¡Œ */
  font-weight: 500 !important; /* å¼·åˆ¶ä½¿ç”¨æ¨™æº–ç²—ç´°ï¼Œä¸å‡†ç€è¦½å™¨è‡ªå‹•åŠ ç²— */
  -webkit-font-smoothing: antialiased; /* è®“å­—é«”é‚Šç·£æ›´å¹³æ»‘éŠ³åˆ© */
}

@media print {
  @page {
    size: A4 landscape;
    margin: 1cm;
  }

  /* éš±è—æ‰€æœ‰ä¸éœ€è¦åˆ—å°çš„ UI */
  .no-print, 
  .scoring-tools, 
  .sidebar, 
  .toolbar,
  .scoring-ticker, .modal-overlay,
  button {
    display: none !important;
  }

  /* ç¢ºä¿èƒŒæ™¯è‰²èˆ‡å­—é«”é¡è‰²é©åˆåˆ—å° */
  body {
    background: white !important;
    color: black !important;
  }

  /* è®“åº§ä½è¡¨å®¹å™¨æ’æ»¿å¯¬åº¦ */
  .print-container {
    width: 100% !important;
    max-width: none !important;
    padding: 0 !important;
    margin: 0 !important;
    transform: scale(1) !important;
  }
}

/* --- 5. è§¸æ§æ‹–æ›³å„ªåŒ– (Touch Support) --- */

/* æ‹–æ›³ä¸­çš„å…ƒç´ æ¨£å¼ (ç”± polyfill è‡ªå‹•åŠ å…¥çš„ class) */
.dnd-poly-drag-image {
  opacity: 0.9 !important;
  transform: scale(1.05); /* è®“æ‹–èµ·ä¾†çš„å¡ç‰‡ç¨å¾®æ”¾å¤§ï¼Œæ›´æœ‰ã€ŒæŠ“èµ·ä¾†ã€çš„æ„Ÿè¦º */
  border-radius: 12px;
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
  z-index: 9999;
}

/* ç¢ºä¿æ‰€æœ‰å¯æ‹–æ›³å…ƒç´ åœ¨æ‰‹æ©Ÿä¸Šä¸æœƒè§¸ç™¼ã€Œé¸å–æ–‡å­—ã€æˆ–ã€Œé•·æŒ‰é¸å–®ã€ */
[draggable="true"] {
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none;   /* Safari */
  user-select: none;           /* Standard */
  /* é—œéµï¼šå‘Šè¨´ç€è¦½å™¨é€™å€åŸŸç”±æˆ‘å€‘ç¨‹å¼æ§åˆ¶ï¼Œä¸è¦è‡ªè¡Œæ²å‹•ï¼Œé™¤éæ˜¯åœ¨å¯æ²å‹•å€åŸŸå…§ */
  touch-action: none;          
}

/* ä½†åœ¨åˆ—è¡¨æˆ–ç¶²æ ¼å®¹å™¨ä¸Šï¼Œæˆ‘å€‘è¦å…è¨±æ²å‹• */
.overflow-auto, .overflow-y-auto {
  touch-action: pan-y; /* å…è¨±å‚ç›´æ²å‹• */
}

@keyframes moonGlow {
  0%, 100% {
    filter: brightness(1);
  }
  50% {
    filter: brightness(1.05);
  }
}

.animate-moonGlow {
  animation: moonGlow 16s ease-in-out infinite;
}